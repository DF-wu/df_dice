<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>df dice recorder</title>
    <meta name="description" content="三骰(大小/豹子)紀錄與統計工具，支援多局、匯入/匯出與基本偏骰檢查。" />

    <link rel="icon" href="dice/dice6.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;700&family=Noto+Serif+TC:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="app" role="application">
      <header class="appHeader">
        <div class="brand">
          <div class="brandTitle">df dice recorder</div>
          <div class="brandSubtitle">三骰紀錄 | 大 / 小 / 豹子</div>
        </div>

        <div class="sessionControls">
          <label class="field">
            <span>局</span>
            <select id="sessionSelect" aria-label="選擇局"></select>
          </label>
          <button id="btnNewSession" type="button">新局</button>
          <button id="btnRenameSession" type="button" class="ghost">改名</button>
          <button id="btnDeleteSession" type="button" class="danger">刪局</button>
        </div>
      </header>

      <section class="grid">
        <section class="card inputCard">
          <div class="cardHeader">
            <h2>輸入</h2>
            <div class="kbdHint">快捷鍵：`1-6` | `Backspace` | `Esc`</div>
          </div>
          <div id="dicePad" class="dicePad" aria-label="骰子輸入盤"></div>

          <div class="draft" aria-label="本回合">
            <div class="draftTitle">本回合</div>
            <div id="draftDice" class="draftDice"></div>
            <div id="draftMeta" class="draftMeta"></div>
          </div>

          <div class="actions">
            <button id="btnUndo" type="button" class="ghost">撤銷最新</button>
            <button id="btnClearDraft" type="button" class="ghost">清空本回合</button>
            <button id="btnResetSession" type="button" class="danger">清空本局</button>
          </div>

          <div class="io">
            <button id="btnExportJson" type="button" class="ghost">匯出 JSON</button>
            <button id="btnExportCsv" type="button" class="ghost">匯出 CSV</button>

            <label class="ghost fileBtn" for="fileImport">匯入 JSON</label>
            <input id="fileImport" type="file" accept="application/json" />
          </div>

          <div class="note">
            資料只存在你的瀏覽器 localStorage。建議定期匯出 JSON 做備份。
          </div>
        </section>

        <section class="card statsCard">
          <div class="cardHeader">
            <h2>統計</h2>
            <div id="statsSummary" class="statsSummary"></div>
          </div>

          <div class="statsGrid">
            <section class="statsBlock">
              <h3>點數分布 (所有骰)</h3>
              <div id="faceStats" class="statsList"></div>
              <div id="chiSquare" class="muted"></div>
            </section>

            <section class="statsBlock">
              <h3>和值分布 (每回合)</h3>
              <div id="sumStats" class="statsList"></div>
              <div id="sumMoments" class="muted"></div>
            </section>

            <section class="statsBlock span2">
              <h3>結果 / 連莊</h3>
              <div id="resultStats" class="statsList"></div>
              <div id="streakStats" class="muted"></div>
            </section>

            <section class="statsBlock">
              <h3>單雙 (不含豹子)</h3>
              <div id="oddEvenStats" class="statsList"></div>
            </section>

            <section class="statsBlock span2">
              <h3>對子 / 豹子</h3>
              <div id="pairStats" class="statsList"></div>
              <div class="muted">指定對子(含豹子)：某點數在回合中出現 2 次以上</div>
              <div id="doubleStats" class="statsList"></div>
            </section>

            <section class="statsBlock span2">
              <h3>熱門牌型 Top 10</h3>
              <ol id="patternTop" class="patternTop"></ol>
            </section>
          </div>
        </section>

        <section class="card historyCard">
          <div class="historyHeader">
            <h2>紀錄</h2>
            <div class="historyControls">
              <label class="field">
                <span>顯示</span>
                <select id="filterSelect" aria-label="篩選紀錄">
                  <option value="all">全部</option>
                  <option value="big">大</option>
                  <option value="small">小</option>
                  <option value="triple">豹子</option>
                </select>
              </label>
              <button id="btnCopySummary" type="button" class="ghost">複製摘要</button>
            </div>
          </div>

          <ol id="historyList" class="historyList" aria-label="紀錄列表"></ol>
        </section>
      </section>

      <footer class="footer">Made for dice battle. No server, no tracking.</footer>
    </main>

    <script type="module" src="./main.js"></script>
  </body>
</html>
